using GameCreator.Runtime.Common;
using UnityEngine;

namespace DaimahouGames.Core.Runtime.Common
{
    public class PropertyArg<TType> : IProperty where TType : PropertyTypeArg
    {
        //============================================================================================================||
        // ※  Variables: ---------------------------------------------------------------------------------------------|
        // ---|　Exposed State -------------------------------------------------------------------------------------->|
        
        [SerializeReference] protected TType m_Property;
        
        // ---|　Internal State ------------------------------------------------------------------------------------->|
        // ---|　Dependencies --------------------------------------------------------------------------------------->|
        // ---|　Properties ----------------------------------------------------------------------------------------->|

        public override string ToString()
        {
            return m_Property?.String ?? "(none)";
        }
        
        // ---|　Events --------------------------------------------------------------------------------------------->|
        //============================================================================================================||
        // ※  Constructors: ------------------------------------------------------------------------------------------|
        // ※  Initialization Methods: --------------------------------------------------------------------------------|
        // ※  Public Methods: ----------------------------------------------------------------------------------------|

        public void Set(ref Args args) => m_Property?.Set(ref args);
        
        // ※  Virtual Methods: ---------------------------------------------------------------------------------------|
        // ※  Protected Methods: -------------------------------------------------------------------------------------|

        protected PropertyArg(TType defaultType) => m_Property = defaultType;
        
        // ※  Private Methods: ---------------------------------------------------------------------------------------|
        //============================================================================================================||
    }
}